# PIM Products Mobile API

API для обработки сообщений о продуктах из Kafka топиков `pim-products-mobile-topic` и `pim-semiproduct-mobile-topic`.

## Описание

Событийно-ориентированный API для синхронизации данных о продуктах между PIM системой и мобильными приложениями. 
Поддерживает операции создания (create), обновления (update) и удаления (delete) для различных типов продуктов.

### Версии
- Версия API: 1.0.0
- Версия контракта сообщений: 01
- Версия AsyncAPI: 3.0.0

## Инфраструктура

### Kafka кластер
- **Хост**: `rc1a-2ugqk8tbmi78mh0q.mdb.yandexcloud.net:9091`
- **Провайдер**: Yandex Cloud
- **Версия протокола**: 3.0-IV1

### Топики

#### `pim-products-mobile-topic`
Основной топик для событий продуктов.

**Конфигурация:**
- Партиции: 1
- Реплики: 1
- Политика очистки: delete
- Retention: 21 день (1814400000 ms)
- Макс. размер сообщения: 100 MB
- Компрессия: producer

**Статистика:**
- Диапазон оффсетов: c 5146
- Размер сегментов: 553 MB (449 сегментов)
- Диапазон размеров сообщений: 235 Bytes - 8 KB
- Средний размер: ~5 KB

#### `pim-semiproduct-mobile-topic`
Топик для событий получения продуктов на препром контуре.

### Consumer группы
| Группа | Активные consumers | Lag | Статус |
|--------|-------------------|-----|--------|
| stage-mobbooks | 1 | 0 | STABLE |
| dev-mobbooks | 1 | 0 | STABLE |

## Типы событий

API поддерживает три типа событий, которые определяются полем `event` в сообщении:

| Тип | Описание | Структура данных |
|-----|----------|------------------|
| `create` | Создание нового продукта | Полная |
| `update` | Обновление существующего продукта | Полная |
| `delete` | Удаление продукта | Минимальная |

## Формат сообщения

```json
{
  "version": "01",
  "number": "8fb7a56e-6974-4b8a-a231-391ce656dc63",
  "timestamp": "28.01.2026T15:42:15",
  "event": "update",
  "data": {
    "contentId": "14-0744-01",
    "productFormat": "eBook",
    "productType": "ЭФУ 5.0",
    "name": {
      "ru": "Искусственный Интеллект. 5-6 классы. Электронная книга"
    }
    // ...
  }
}